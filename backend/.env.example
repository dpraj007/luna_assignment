# ==============================================================================
# Luna Social Backend - Environment Configuration
# ==============================================================================
# Copy this file to .env and update values as needed.
# All settings have sensible defaults for development.

# ==============================================================================
# App Settings
# ==============================================================================
APP_NAME="Luna Social Backend"
DEBUG=true
API_V1_PREFIX="/api/v1"
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR

# ==============================================================================
# Database
# ==============================================================================
# SQLite (default for development)
DATABASE_URL="sqlite+aiosqlite:///./luna_social.db"

# PostgreSQL (recommended for production)
# DATABASE_URL="postgresql+asyncpg://user:password@localhost:5432/luna_social"

DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# ==============================================================================
# Redis & Streaming
# ==============================================================================
REDIS_URL="redis://localhost:6379"

# Use in-memory backend for demo (no Redis required)
USE_FAKE_REDIS=true

# Stream backend: memory, redis, or kafka
STREAM_BACKEND="memory"

# Max events to keep in history
EVENT_HISTORY_LIMIT=1000

# Kafka settings (if STREAM_BACKEND=kafka)
# KAFKA_BOOTSTRAP_SERVERS="localhost:9092"

# ==============================================================================
# LLM Configuration (OpenRouter API - Recommended)
# ==============================================================================
# OpenRouter provides access to multiple LLM providers via a unified API
# Get your API key at: https://openrouter.ai/keys
# Browse available models at: https://openrouter.ai/models

# Your OpenRouter API key (required for LLM features)
# OPENROUTER_API_KEY="sk-or-v1-..."

# Base URL for OpenRouter API (default is correct for most cases)
OPENROUTER_BASE_URL="https://openrouter.ai/api/v1"

# Model to use - see https://openrouter.ai/models for options
# Cost-effective options: anthropic/claude-3-haiku, openai/gpt-3.5-turbo
# High-quality options: anthropic/claude-3-sonnet, openai/gpt-4-turbo
OPENROUTER_MODEL="anthropic/claude-3-haiku"

# Optional: Site info for OpenRouter dashboard tracking
# OPENROUTER_SITE_URL="https://your-site.com"
OPENROUTER_SITE_NAME="Luna Social"

# LLM request settings
LLM_MAX_TOKENS=1024
LLM_TEMPERATURE=0.7
LLM_TIMEOUT_SECONDS=30

# ==============================================================================
# Legacy OpenAI (Deprecated - use OpenRouter instead)
# ==============================================================================
# OPENAI_API_KEY="sk-..."
# OPENAI_MODEL="gpt-4"

# ==============================================================================
# Simulation Settings
# ==============================================================================
DEFAULT_SIMULATION_SPEED=1.0
MAX_SIMULATION_SPEED=100.0
DEFAULT_USER_POOL_SIZE=50
SIMULATION_TICK_INTERVAL_SECONDS=1.0
SIMULATION_MAX_ACTIVE_USERS=100

# Use LangGraph-based orchestrator (recommended)
USE_LANGGRAPH_ORCHESTRATOR=true

# ==============================================================================
# Recommendation Settings
# ==============================================================================
RECOMMENDATION_LIMIT=10
COMPATIBILITY_THRESHOLD=0.5
MAX_DISTANCE_KM=50.0

# ==============================================================================
# Preference Evolution
# ==============================================================================
PREFERENCE_EVOLUTION_ENABLED=true
PREFERENCE_LEARNING_RATE=0.1
PREFERENCE_SOCIAL_INFLUENCE_RATE=0.02

# ==============================================================================
# Environment & Weather
# ==============================================================================
# OpenWeatherMap API key (optional - uses simulated weather if not set)
# WEATHER_API_KEY="your-openweathermap-api-key"

# Default location for simulation (NYC)
DEFAULT_LOCATION_LAT=40.7128
DEFAULT_LOCATION_LON=-74.0060

# ==============================================================================
# Frontend & Visualization
# ==============================================================================
# Map provider: leaflet (free) or mapbox (requires token)
MAP_PROVIDER="leaflet"

# Mapbox token (required if MAP_PROVIDER=mapbox)
# MAPBOX_TOKEN="pk...."

ENABLE_ADVANCED_VISUALIZATIONS=true

# ==============================================================================
# Feature Flags
# ==============================================================================
ENABLE_WEBSOCKET=true
ENABLE_KAFKA=false
ENABLE_REPLAY=true
ENABLE_SNAPSHOTS=true
ENABLE_JOURNEY_TRACKING=true

# ==============================================================================
# CORS Settings
# ==============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS="http://localhost:5173,http://localhost:3000"
